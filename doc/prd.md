# Edge System Checker PRD (Product Requirements Document)

## 📋 프로젝트 개요

### 제품명
**Edge System Checker** - 해양 장비 모니터링 시스템

### 목적
해양 장비의 실시간 상태를 모니터링하고 문제를 조기 발견하여 시스템 안정성을 보장하는 웹 기반 대시보드

### 대상 사용자
- 해양 장비 운영자
- 시스템 관리자
- 기술 지원팀

---

## 🎯 핵심 기능 요구사항

### 1. 시스템 상태 모니터링
- **카메라 시스템**: IP 카메라 연결 상태 및 스트리밍 품질
- **네트워크 스토리지**: NAS 연결 상태 및 디스크 사용량
- **전원 관리**: UPS(NUT) 배터리 상태 및 전력 정보
- **데이터베이스**: PostgreSQL 연결 상태 및 성능 지표

### 2. 실시간 대시보드
- **상태 표시**: 각 시스템의 실시간 상태 (정상/경고/오류)
- **시각적 표시**: 색상 코딩으로 상태 구분
- **자동 새로고침**: 5초 간격으로 상태 업데이트
- **응답성**: 모바일/태블릿 지원

### 3. 알림 시스템
- **즉시 알림**: 시스템 오류 발생 시 즉시 표시
- **로그 기록**: 모든 상태 변화 기록
- **이력 관리**: 과거 상태 변화 추적

---

## 🏗️ 기술 요구사항

### 프론트엔드
- **프레임워크**: Flask (Python)
- **템플릿**: Jinja2 HTML 템플릿
- **스타일링**: CSS3 (반응형 디자인)
- **JavaScript**: AJAX를 통한 비동기 업데이트

### 백엔드
- **언어**: Python 3.8+
- **웹 프레임워크**: Flask
- **데이터베이스**: PostgreSQL
- **모니터링**: psutil, requests 라이브러리

### 인프라
- **컨테이너화**: Docker & Docker Compose
- **배포**: Linux 환경 (Ubuntu 20.04+)
- **네트워크**: HTTP/HTTPS 지원

---

## 📊 상세 기능 명세

### 1. 카메라 모니터링 (`camera_check.py`)
```python
# 기능 요구사항
- IP 카메라 연결 테스트
- RTSP 스트림 상태 확인
- 카메라 해상도 및 FPS 모니터링
- 네트워크 대역폭 사용량 측정
```

### 2. NAS 모니터링 (`nas_check.py`)
```python
# 기능 요구사항
- SMB/CIFS 연결 상태 확인
- 디스크 사용량 모니터링
- 파일 시스템 상태 검사
- 네트워크 성능 측정
```

### 3. UPS 모니터링 (`nut_check.py`)
```python
# 기능 요구사항
- NUT 서버 연결 상태
- 배터리 잔량 및 상태
- 전력 입력/출력 모니터링
- 예상 백업 시간 계산
```

### 4. 데이터베이스 모니터링 (`pg_check.py`)
```python
# 기능 요구사항
- PostgreSQL 연결 상태
- 데이터베이스 성능 지표
- 연결 풀 상태 모니터링
- 쿼리 응답 시간 측정
```

---

## 🎨 사용자 인터페이스 요구사항

### 대시보드 레이아웃
```
┌─────────────────────────────────────────┐
│  Edge System Checker Dashboard          │
├─────────────────────────────────────────┤
│  📹 Camera System    🟢 Online         │
│  📁 NAS Storage      🟢 Online         │
│  🔋 UPS Power        🟡 Warning        │
│  🗄️ Database        🟢 Online         │
├─────────────────────────────────────────┤
│  Last Update: 2024-10-27 23:45:12      │
│  Auto Refresh: Every 5 seconds         │
└─────────────────────────────────────────┘
```

### 상태 표시 색상
- 🟢 **녹색**: 정상 상태 (모든 시스템 온라인)
- 🟡 **노란색**: 경고 상태 (일부 문제 있음)
- 🔴 **빨간색**: 오류 상태 (심각한 문제)

### 반응형 디자인
- **데스크톱**: 1200px+ (전체 기능 표시)
- **태블릿**: 768px-1199px (컴팩트 레이아웃)
- **모바일**: 320px-767px (세로 스택 레이아웃)

---

## 🔧 설정 및 배포 요구사항

### 환경 설정 파일 (`config.json`)
```json
{
  "camera": {
    "ip": "192.168.1.100",
    "port": 554,
    "username": "admin",
    "password": "password"
  },
  "nas": {
    "host": "192.168.1.200",
    "share": "/data",
    "username": "nas_user",
    "password": "nas_pass"
  },
  "ups": {
    "host": "localhost",
    "port": 3493,
    "name": "ups"
  },
  "database": {
    "host": "localhost",
    "port": 5432,
    "database": "edge_checker",
    "username": "postgres",
    "password": "db_pass"
  }
}
```

### Docker 구성
```yaml
# docker-compose.yml
version: '3.8'
services:
  edge-checker:
    build: .
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=production
    volumes:
      - ./config.json:/app/config.json
    restart: unless-stopped
```

---

## 📈 성능 요구사항

### 응답 시간
- **페이지 로드**: 2초 이내
- **상태 업데이트**: 1초 이내
- **API 응답**: 500ms 이내

### 가용성
- **업타임**: 99.9% 이상
- **자동 복구**: 시스템 오류 시 자동 재시작
- **로드 밸런싱**: 다중 인스턴스 지원

### 확장성
- **동시 사용자**: 50명 이상
- **모니터링 대상**: 100개 이상 시스템
- **데이터 보관**: 30일 이상

---

## 🔒 보안 요구사항

### 인증 및 권한
- **기본 인증**: 사용자명/비밀번호
- **세션 관리**: JWT 토큰 기반
- **권한 분리**: 읽기/쓰기 권한 구분

### 데이터 보호
- **암호화**: HTTPS 통신 필수
- **민감 정보**: 설정 파일 암호화
- **로그 보안**: 개인정보 마스킹

---

## 🧪 테스트 요구사항

### 단위 테스트
- 각 모니터링 모듈별 테스트
- API 엔드포인트 테스트
- 데이터베이스 연결 테스트

### 통합 테스트
- 전체 시스템 워크플로우 테스트
- 네트워크 장애 시나리오 테스트
- 부하 테스트

### 사용자 테스트
- 실제 운영 환경에서의 테스트
- 사용자 피드백 수집
- 성능 최적화

---

## 📅 개발 일정

### Phase 1: 기본 기능 (2주)
- [ ] 프로젝트 구조 설정
- [ ] 기본 Flask 앱 개발
- [ ] 각 모니터링 모듈 구현
- [ ] 기본 대시보드 UI

### Phase 2: 고급 기능 (2주)
- [ ] 실시간 업데이트 구현
- [ ] 알림 시스템 개발
- [ ] 반응형 디자인 적용
- [ ] Docker 컨테이너화

### Phase 3: 배포 및 최적화 (1주)
- [ ] 프로덕션 환경 배포
- [ ] 성능 최적화
- [ ] 보안 강화
- [ ] 문서화 완료

---

## 📚 참고 자료

### 기술 문서
- Flask 공식 문서
- PostgreSQL 모니터링 가이드
- NUT UPS 모니터링 매뉴얼
- Docker 배포 가이드

### 기존 시스템 분석
- 현재 Edge Checker 코드 분석
- 성능 병목 지점 파악
- 사용자 피드백 반영

---

## 🎯 성공 지표

### 기술적 지표
- 시스템 가용성 99.9% 이상
- 평균 응답 시간 1초 이내
- 오류 발생률 0.1% 이하

### 사용자 만족도
- 사용자 피드백 점수 4.5/5.0 이상
- 일일 활성 사용자 증가
- 시스템 오류 조기 발견률 향상

---

*이 PRD는 Edge System Checker 재개발을 위한 요구사항 문서입니다. 개발 과정에서 요구사항이 변경될 수 있으며, 정기적인 리뷰와 업데이트가 필요합니다.*