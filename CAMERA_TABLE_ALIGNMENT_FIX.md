# 카메라 테이블 정렬 수정

## 📅 업데이트 날짜
2025-10-27

## 🎯 문제점

카메라 상세 결과 테이블에서 헤더(원본, 블러, 로그)와 데이터(PASS) 컬럼 정렬이 맞지 않는 문제가 있었습니다.

### 기존 문제
```
  카메라        IP               원본       블러       로그
  카메라 1      192.168.1.101    PASS PASS PASS      ← 정렬 안 맞음!
  카메라 2      192.168.1.102    PASS PASS PASS
```

**원인**: 색상 코드(`\033[32m`, `\033[0m` 등)가 포함된 문자열에 Python의 문자열 포맷팅(`:<8`)을 사용하면, 색상 코드도 길이에 포함되어 실제 표시되는 텍스트의 위치가 틀어짐.

## 🔧 수정사항

### 1. 헤더 간격 조정
```python
# 변경 전
print(f"  {'카메라':<10} {'IP':<16} {'원본':<8} {'블러':<8} {'로그':<8}")

# 변경 후
print(f"  {'카메라':<12} {'IP':<17} {'원본':<10} {'블러':<10} {'로그':<10}")
```

### 2. 데이터 출력 간격 수동 조정
```python
# 변경 전 (색상 코드 포함 문자열에 너비 지정)
print(f"  {name:<10} {ip:<16} {source_str:<8} {mediamtx_str:<8} {log_str:<8}")

# 변경 후 (수동으로 공백 추가)
print(f"  {name:<12} {ip:<17} {source_str}     {mediamtx_str}     {log_str}")
```

**핵심**: 색상 코드가 포함된 문자열(`source_str`, `mediamtx_str`, `log_str`)에는 너비 지정을 하지 않고, 수동으로 공백(5칸)을 추가하여 정렬

## 📊 수정된 출력 예시

### 올바르게 정렬된 테이블
```
════════════════════════════════════════════════════════════════════════════════
  카메라 상세 결과
════════════════════════════════════════════════════════════════════════════════
  카메라        IP               원본        블러        로그
  카메라 1      192.168.1.101    PASS       PASS       PASS
  카메라 2      192.168.1.102    PASS       PASS       PASS
  카메라 3      192.168.1.103    PASS       PASS       PASS
  카메라 4      192.168.1.104    PASS       PASS       PASS
════════════════════════════════════════════════════════════════════════════════
```

## 🎯 정렬 규칙

| 컬럼    | 너비 | 정렬 방식              |
|---------|------|------------------------|
| 카메라  | 12자 | 좌측 정렬 (`:<12`)    |
| IP      | 17자 | 좌측 정렬 (`:<17`)    |
| 원본    | 10자 | 헤더만 좌측 정렬      |
| 블러    | 10자 | 헤더만 좌측 정렬      |
| 로그    | 10자 | 헤더만 좌측 정렬      |

### 데이터 행 간격
- 카메라 이름: 12자 좌측 정렬
- IP 주소: 17자 좌측 정렬
- 원본 상태: 바로 출력 + 5칸 공백
- 블러 상태: 바로 출력 + 5칸 공백
- 로그 상태: 바로 출력

## 💡 색상 코드 문제 해결

### 문제
Python의 f-string 너비 지정(`:<8`)은 문자열의 **전체 길이**를 계산합니다:
```python
text = f"{Colors.PASS}PASS{Colors.RESET}"  # 실제로는 "\033[32mPASS\033[0m"
print(f"{text:<8}")  # 색상 코드 포함 길이로 계산되어 정렬 틀어짐
```

### 해결 방법
색상 코드가 포함된 문자열은 너비 지정 없이 출력하고, 수동으로 공백 추가:
```python
# 색상 코드 포함 문자열
source_str = f"{Colors.PASS}PASS{Colors.RESET}"

# 수동으로 공백 추가 (5칸)
print(f"  {name:<12} {ip:<17} {source_str}     {mediamtx_str}     {log_str}")
```

## ✅ 테스트 결과

```bash
$ python test_system_module.py

✓ 모든 모듈 import 완료
✓ 테이블 정렬 확인 완료
✓ 모든 테스트 완료
```

## 🔍 정렬 검증

### 헤더 위치
```
  카메라        IP               원본        블러        로그
  └─12자─┘    └──17자──┘      └─10자─┘   └─10자─┘   └─10자─┘
```

### 데이터 위치
```
  카메라 1      192.168.1.101    PASS       PASS       PASS
  └─12자─┘    └──17자──┘      └4자┘5칸    └4자┘5칸    └4자┘
```

## 🎨 다양한 상태 예시

```
  카메라        IP               원본        블러        로그
  카메라 1      192.168.1.101    PASS       PASS       PASS
  카메라 2      192.168.1.102    FAIL       PASS       PASS
  카메라 3      192.168.1.103    PASS       FAIL       PASS
  카메라 4      192.168.1.104    PASS       PASS       FAIL
  카메라 5      192.168.1.105    SKIP       SKIP       SKIP
```

모든 상태(PASS, FAIL, SKIP)에서 정렬이 일치합니다!

## 🚀 사용 방법

```bash
# SSH로 접속
ssh koast-user@10.1.10.128

# 프로그램 실행
cd ~/edge-system-checker
source venv/bin/activate
python checker.py

# Auto 모드 선택 (기본값)
모드 선택 [1: GUI / 2: Auto] (기본값: 2): 
```

## 🎉 결론

**카메라 테이블의 헤더와 데이터 컬럼이 완벽하게 정렬되었습니다!**

- ✅ 헤더 간격 조정 (12, 17, 10, 10, 10자)
- ✅ 색상 코드 문제 해결 (수동 공백 추가)
- ✅ 모든 상태(PASS/FAIL/SKIP)에서 정렬 일치
- ✅ 가독성 향상

이제 **카메라 상세 결과 테이블이 깔끔하게 정렬**됩니다! 🎊

