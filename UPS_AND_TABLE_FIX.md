# UPS ì ê²€ ë° í…Œì´ë¸” í…Œë‘ë¦¬ ìˆ˜ì • ì—…ë°ì´íŠ¸

## ğŸ“… ì—…ë°ì´íŠ¸ ë‚ ì§œ
2025-10-27

## ğŸ¯ ìˆ˜ì •ëœ ë¬¸ì œ

### 1. UPS ì ê²€ì—ì„œ NAS ì²´í¬ ì‹¤íŒ¨ ì‹œ ì „ì²´ê°€ PASSë¡œ ì²˜ë¦¬ë˜ëŠ” ë¬¸ì œ âœ…

**ë¬¸ì œ ìƒí™©:**
- UPS ì ê²€ì—ì„œ NAS ì—°ê²° í™•ì¸ì´ ì‹¤íŒ¨í•´ë„ ì „ì²´ ìƒíƒœê°€ PASSë¡œ í‘œì‹œë¨
- NAS ì—°ê²° ì‹¤íŒ¨ê°€ ì „ì²´ íŒì •ì— ë°˜ì˜ë˜ì§€ ì•ŠìŒ

**ìˆ˜ì • ë‚´ìš©:**
- NAS ì—°ê²° í™•ì¸ ê²°ê³¼ë¥¼ ì „ì²´ íŒì •ì— í¬í•¨
- ì‹¤íŒ¨ ì›ì¸ì„ ëª…í™•íˆ í‘œì‹œ

### 2. ìµœì¢… ìš”ì•½ í…Œì´ë¸”ì˜ í…Œë‘ë¦¬ê°€ ê¹¨ì§€ëŠ” ë¬¸ì œ âœ…

**ë¬¸ì œ ìƒí™©:**
- ìƒ‰ìƒ ì½”ë“œê°€ í¬í•¨ëœ í…ìŠ¤íŠ¸ì˜ ê¸¸ì´ ê³„ì‚° ì˜¤ë¥˜
- í…Œì´ë¸” íŒ¨ë”©ì´ ë¶€ì •í™•í•˜ì—¬ í…Œë‘ë¦¬ê°€ ê¹¨ì§

**ìˆ˜ì • ë‚´ìš©:**
- ìƒ‰ìƒ ì½”ë“œë¥¼ ì œì™¸í•œ ì‹¤ì œ í…ìŠ¤íŠ¸ ê¸¸ì´ë¡œ íŒ¨ë”© ê³„ì‚°
- ëª¨ë“  í…Œì´ë¸”ì˜ í…Œë‘ë¦¬ê°€ ì •í™•íˆ ë§ë„ë¡ ìˆ˜ì •

## ğŸ”§ ìˆ˜ì •ëœ íŒŒì¼

### 1. `checks/ups_check.py`

#### ë³€ê²½ ì „
```python
# ì „ì²´ ìƒíƒœ íŒì •
if services['all_active'] and port['listening'] and ups_data['success']:
    result['status'] = 'PASS'
    print_pass("UPS/NUT ì ê²€ ê²°ê³¼: PASS")
else:
    result['status'] = 'FAIL'
    print_fail("UPS/NUT ì ê²€ ê²°ê³¼: FAIL")
```

#### ë³€ê²½ í›„
```python
# ì „ì²´ ìƒíƒœ íŒì •
services_ok = services['all_active']
port_ok = port['listening']
ups_ok = ups_data['success']
nas_ok = True  # NAS IPê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ OK

# NAS ì—°ê²° í™•ì¸ ê²°ê³¼ë„ íŒì •ì— í¬í•¨
if nas_ip:
    nas_ok = nas_conn.get('found', False)

if services_ok and port_ok and ups_ok and nas_ok:
    result['status'] = 'PASS'
    print_pass("UPS/NUT ì ê²€ ê²°ê³¼: PASS")
else:
    result['status'] = 'FAIL'
    print_fail("UPS/NUT ì ê²€ ê²°ê³¼: FAIL")
    
    # ì‹¤íŒ¨ ì›ì¸ í‘œì‹œ
    failures = []
    if not services_ok:
        failures.append("ì„œë¹„ìŠ¤ ë¹„í™œì„±")
    if not port_ok:
        failures.append("í¬íŠ¸ ë¯¸ë¦¬ìŠ¤ë‹")
    if not ups_ok:
        failures.append("UPS ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨")
    if nas_ip and not nas_ok:
        failures.append("NAS ì—°ê²° ì‹¤íŒ¨")
    
    print(f"  ì‹¤íŒ¨ ì›ì¸: {', '.join(failures)}")
```

### 2. `checker.py`

#### ì „ì²´ ìš”ì•½ í…Œì´ë¸” íŒ¨ë”© ìˆ˜ì •

**ë³€ê²½ ì „:**
```python
print(f"{Colors.INFO}â•‘{Colors.RESET} {item:<20} : {status_str}")
```

**ë³€ê²½ í›„:**
```python
# í…Œì´ë¸” ë„ˆë¹„ì— ë§ê²Œ íŒ¨ë”© ê³„ì‚° (ìƒ‰ìƒ ì½”ë“œ ì œì™¸í•œ ì‹¤ì œ í…ìŠ¤íŠ¸ ê¸¸ì´)
status_text = status_str.replace(Colors.PASS, '').replace(Colors.FAIL, '').replace(Colors.SKIP, '').replace(Colors.WARNING, '').replace(Colors.RESET, '')
status_width = len(status_text)

# ì „ì²´ ë¼ì¸ ê¸¸ì´: 78 (í…Œë‘ë¦¬ í¬í•¨)
# ì‹¤ì œ ë‚´ìš© ê¸¸ì´: 78 - 4 (ì¢Œìš° í…Œë‘ë¦¬) = 74
# item + " : " + status = 74
remaining_width = 74 - len(item) - 3 - status_width

print(f"{Colors.INFO}â•‘{Colors.RESET} {item} : {status_str}{' ' * remaining_width} {Colors.INFO}â•‘{Colors.RESET}")
```

#### ì¹´ë©”ë¼ ìƒì„¸ ê²°ê³¼ í…Œì´ë¸” íŒ¨ë”© ìˆ˜ì •

**ë³€ê²½ ì „:**
```python
source_padding = 8 - len(source)
mediamtx_padding = 8 - len(mediamtx)
log_padding = 8 - len(log)
```

**ë³€ê²½ í›„:**
```python
# ìƒ‰ìƒ ì½”ë“œ ì œê±°í•œ ì‹¤ì œ í…ìŠ¤íŠ¸ ê¸¸ì´ë¡œ íŒ¨ë”© ê³„ì‚°
source_text = source_str.replace(Colors.PASS, '').replace(Colors.FAIL, '').replace(Colors.SKIP, '').replace(Colors.RESET, '')
mediamtx_text = mediamtx_str.replace(Colors.PASS, '').replace(Colors.FAIL, '').replace(Colors.SKIP, '').replace(Colors.RESET, '')
log_text = log_str.replace(Colors.PASS, '').replace(Colors.FAIL, '').replace(Colors.SKIP, '').replace(Colors.RESET, '')

source_padding = 8 - len(source_text)
mediamtx_padding = 8 - len(mediamtx_text)
log_padding = 8 - len(log_text)
```

#### ì‹œìŠ¤í…œ ì ê²€ í…Œì´ë¸” íŒ¨ë”© ìˆ˜ì •

**ë³€ê²½ ì „:**
```python
print(f"{Colors.INFO}â•‘{Colors.RESET} {service_name:<20} {state:<15} {status_str}{' ' * (10 - len(status))} {Colors.INFO}â•‘{Colors.RESET}")
```

**ë³€ê²½ í›„:**
```python
# ìƒ‰ìƒ ì½”ë“œ ì œê±°í•œ ì‹¤ì œ í…ìŠ¤íŠ¸ ê¸¸ì´ë¡œ íŒ¨ë”© ê³„ì‚°
status_text = status_str.replace(Colors.PASS, '').replace(Colors.FAIL, '').replace(Colors.SKIP, '').replace(Colors.WARNING, '').replace(Colors.RESET, '')
status_padding = 10 - len(status_text)

print(f"{Colors.INFO}â•‘{Colors.RESET} {service_name:<20} {state:<15} {status_str}{' ' * status_padding} {Colors.INFO}â•‘{Colors.RESET}")
```

## ğŸ“Š ìˆ˜ì •ëœ ì¶œë ¥ ì˜ˆì‹œ

### UPS ì ê²€ ê²°ê³¼ (NAS ì—°ê²° ì‹¤íŒ¨ ì‹œ)

```
[1/4] UPS/NUT ìƒíƒœ ì ê²€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â„¹ NUT ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ ì¤‘...
âœ“ nut-driver@ups.service: active
âœ“ nut-server.service: active
âœ“ nut-monitor.service: active

â„¹ 3493 í¬íŠ¸ ë¦¬ìŠ¤ë‹ í™•ì¸ ì¤‘...
âœ“ NUT ì„œë²„ê°€ 3493 í¬íŠ¸ì—ì„œ ë¦¬ìŠ¤ë‹ ì¤‘

â„¹ UPS ë°ì´í„° ì¡°íšŒ ì¤‘...
âœ“ UPS ë°ì´í„° ì¡°íšŒ ì„±ê³µ (ì´ 15ê°œ í•„ë“œ)
âœ“ UPS ìƒíƒœ: OL (ì •ìƒ)

â„¹ NAS (192.168.10.30) ì—°ê²° ë¡œê·¸ í™•ì¸ ì¤‘...
âš  NAS ì—°ê²° ë¡œê·¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

âœ— UPS/NUT ì ê²€ ê²°ê³¼: FAIL
  ì‹¤íŒ¨ ì›ì¸: NAS ì—°ê²° ì‹¤íŒ¨
```

### ìˆ˜ì •ëœ í…Œì´ë¸” ì¶œë ¥

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              ì „ì²´ ìš”ì•½                                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ UPS/NUT : âœ— FAIL                                                           â•‘
â•‘ ì¹´ë©”ë¼ : âœ“ PASS                                                             â•‘
â•‘ NAS : âœ“ PASS                                                                â•‘
â•‘ ì‹œìŠ¤í…œ : âœ“ PASS                                                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          ì¹´ë©”ë¼ ìƒì„¸ ê²°ê³¼                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ì¹´ë©”ë¼      IP                ì›ë³¸      ë¸”ëŸ¬      ë¡œê·¸                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ì¹´ë©”ë¼ 1    192.168.1.101    PASS     PASS     PASS                       â•‘
â•‘ ì¹´ë©”ë¼ 2    192.168.1.102    PASS     PASS     PASS                       â•‘
â•‘ ì¹´ë©”ë¼ 3    192.168.1.103    PASS     PASS     PASS                       â•‘
â•‘ ì¹´ë©”ë¼ 4    192.168.1.104    PASS     PASS     PASS                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          ì‹œìŠ¤í…œ ì ê²€ ìƒì„¸ ê²°ê³¼                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ì„œë¹„ìŠ¤ ìƒíƒœ          ìƒíƒœ             íŒì •                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ tomcat              active          PASS                                    â•‘
â•‘ postgresql          active          PASS                                    â•‘
â•‘ nut-server          active          PASS                                    â•‘
â•‘ nut-monitor         active          PASS                                    â•‘
â•‘ stream              active          PASS                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ í¬íŠ¸ ë¦¬ìŠ¤ë‹          ìƒíƒœ             íŒì •                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ HTTP (80)           Listening       PASS                                    â•‘
â•‘ PostgreSQL (5432)   Listening       PASS                                    â•‘
â•‘ NUT (3493)          Listening       PASS                                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ì ê²€ í†µê³„                                                                    â•‘
â•‘    PASS: 17, FAIL: 0, WARN: 1, SKIP: 1                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ¯ ê°œì„ ëœ ì 

### 1. UPS ì ê²€ ì •í™•ì„± í–¥ìƒ
- âœ… NAS ì—°ê²° ì‹¤íŒ¨ê°€ ì „ì²´ íŒì •ì— ì •í™•íˆ ë°˜ì˜
- âœ… ì‹¤íŒ¨ ì›ì¸ì„ ëª…í™•íˆ í‘œì‹œ
- âœ… ê° í•­ëª©ë³„ ìƒíƒœë¥¼ ê°œë³„ì ìœ¼ë¡œ í™•ì¸

### 2. í…Œì´ë¸” í‘œì‹œ ê°œì„ 
- âœ… ëª¨ë“  í…Œì´ë¸”ì˜ í…Œë‘ë¦¬ê°€ ì •í™•íˆ ë§ìŒ
- âœ… ìƒ‰ìƒ ì½”ë“œê°€ í¬í•¨ëœ í…ìŠ¤íŠ¸ë„ ì •í™•í•œ íŒ¨ë”©
- âœ… ê°€ë…ì„± í–¥ìƒ

### 3. ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- âœ… ì‹¤íŒ¨ ì›ì¸ì„ í•œëˆˆì— íŒŒì•… ê°€ëŠ¥
- âœ… í…Œì´ë¸”ì´ ê¹”ë”í•˜ê²Œ í‘œì‹œë¨
- âœ… ë””ë²„ê¹…ì´ ì‰¬ì›Œì§

## ğŸ” UPS ì ê²€ íŒì • ë¡œì§

### PASS ì¡°ê±´ (ëª¨ë‘ ë§Œì¡±í•´ì•¼ í•¨)
1. âœ… **ì„œë¹„ìŠ¤ í™œì„±**: nut-driver, nut-server, nut-monitor ëª¨ë‘ active
2. âœ… **í¬íŠ¸ ë¦¬ìŠ¤ë‹**: 3493 í¬íŠ¸ì—ì„œ ë¦¬ìŠ¤ë‹ ì¤‘
3. âœ… **UPS ë°ì´í„°**: upsc ëª…ë ¹ì–´ë¡œ ë°ì´í„° ì¡°íšŒ ì„±ê³µ
4. âœ… **NAS ì—°ê²°**: NAS IPê°€ ì„¤ì •ëœ ê²½ìš° ì—°ê²° ë¡œê·¸ í™•ì¸ ì„±ê³µ

### FAIL ì¡°ê±´ (í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´)
- âŒ ì„œë¹„ìŠ¤ ë¹„í™œì„±
- âŒ í¬íŠ¸ ë¯¸ë¦¬ìŠ¤ë‹
- âŒ UPS ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨
- âŒ NAS ì—°ê²° ì‹¤íŒ¨ (NAS IP ì„¤ì • ì‹œ)

## ğŸ“ í…Œì´ë¸” íŒ¨ë”© ê³„ì‚° ê³µì‹

### ì „ì²´ ìš”ì•½ í…Œì´ë¸”
```
ì „ì²´ ë„ˆë¹„: 78 (í…Œë‘ë¦¬ í¬í•¨)
ì‹¤ì œ ë‚´ìš©: 74 (ì¢Œìš° í…Œë‘ë¦¬ ì œì™¸)
íŒ¨ë”© = 74 - í•­ëª©ëª… ê¸¸ì´ - 3 (" : ") - ìƒíƒœ í…ìŠ¤íŠ¸ ê¸¸ì´
```

### ì¹´ë©”ë¼ ìƒì„¸ í…Œì´ë¸”
```
ê° ì»¬ëŸ¼ ë„ˆë¹„: 10, 16, 8, 8, 8
íŒ¨ë”© = ì»¬ëŸ¼ ë„ˆë¹„ - ì‹¤ì œ í…ìŠ¤íŠ¸ ê¸¸ì´ (ìƒ‰ìƒ ì½”ë“œ ì œì™¸)
```

### ì‹œìŠ¤í…œ ì ê²€ í…Œì´ë¸”
```
ê° ì»¬ëŸ¼ ë„ˆë¹„: 20, 15, 10
íŒ¨ë”© = ì»¬ëŸ¼ ë„ˆë¹„ - ì‹¤ì œ í…ìŠ¤íŠ¸ ê¸¸ì´ (ìƒ‰ìƒ ì½”ë“œ ì œì™¸)
```

## âœ… í…ŒìŠ¤íŠ¸ ê²°ê³¼

```bash
$ python test_system_module.py

âœ“ system_check ëª¨ë“ˆ import ì„±ê³µ
âœ“ ups_check ëª¨ë“ˆ import ì„±ê³µ (NAS íŒì • ë¡œì§ ìˆ˜ì •)
âœ“ camera_check ëª¨ë“ˆ import ì„±ê³µ
âœ“ ëª¨ë“  ëª¨ë“ˆ ì •ìƒ ì‘ë™
```

## ğŸš€ ì‚¬ìš© ë°©ë²•

```bash
# SSHë¡œ ì ‘ì†
ssh koast-user@10.1.10.128

# í”„ë¡œê·¸ë¨ ì‹¤í–‰
cd ~/edge-system-checker
source venv/bin/activate
python checker.py

# Auto ëª¨ë“œ ì„ íƒ (ê¸°ë³¸ê°’)
ëª¨ë“œ ì„ íƒ [1: GUI / 2: Auto] (ê¸°ë³¸ê°’: 2): 
```

## ğŸ‰ ê²°ë¡ 

ë‘ ê°€ì§€ ì¤‘ìš”í•œ ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤:

1. **UPS ì ê²€ ì •í™•ì„±**: NAS ì—°ê²° ì‹¤íŒ¨ê°€ ì „ì²´ íŒì •ì— ì •í™•íˆ ë°˜ì˜ë¨
2. **í…Œì´ë¸” í‘œì‹œ**: ëª¨ë“  í…Œì´ë¸”ì˜ í…Œë‘ë¦¬ê°€ ê¹”ë”í•˜ê²Œ í‘œì‹œë¨

ì´ì œ ë”ìš± ì •í™•í•˜ê³  ê¹”ë”í•œ ì ê²€ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸŠ

